<div class="row">
  <div class="comments media-area w-100">
    <h3 class="text-center">Comments</h3>
    <div class="col-md-12">
      <app-fln-comment [comment]="comment" (commentEmit)="addComment($event)"></app-fln-comment>
    </div>
    <div *ngFor="let comment of commentList; index as i">
      <div class="media">
        <div class="pull-left" href="#">
          <div class="avatar">
            <img alt="Tim Picture" class="media-object c-img-thumnail img-circle img-no-padding img-responsive"
              src="{{ comment.author.photoURL }}" />
          </div>
        </div>
        <div class="media-body" *ngIf="!comment.editCommentValid">
          <h6 class="media-heading">{{ comment.author.displayName }}</h6>
          <div class="pull-right">
            <h6 class="text-muted" *ngIf="comment.hasOwnProperty('updatedAt'); else createAt">{{ comment.updatedAt | postTime }}</h6>
            <ng-template #createAt><h6 class="text-muted">{{ comment.createdAt | postTime }}</h6></ng-template>
            
          </div>
          <p class="">
            {{ comment.comment }}
          </p>
          <div *ngIf="comment.addCommentValid">
            <app-fln-comment [comment]="comment" (commentEmit)="addSubcomment(comment, $event)"></app-fln-comment>
          </div>
        </div>
        <div class="media-body" *ngIf="comment.editCommentValid">
          <textarea class="form-control textarea" rows="2" ngif="comment.addCommentValid" placeholder="Write anything..."
          [formControl]="commentForm"></textarea>
        </div>
        <div class="function-box d-flex">
          <a class="btn btn-info btn-link pull-right " *ngIf="!comment.editCommentValid" (click)="addReply(comment)"><i class="fa fa-reply"></i> Reply</a>
          <a class="btn btn-info btn-link pull-right " *ngIf="comment.editCommentValid" (click)="saveComment(comment)"> SAVE</a>
          <app-fln-like [comment]="comment"></app-fln-like>
          <button class="btn btn-warning" (click)="editComment(comment)">
            edit
          </button>
          <button class="btn btn-danger" (click)="deleteComment(comment)">
            delete
          </button>

        </div>
      </div>

      <div *ngIf="comment.hasOwnProperty('subComments')">
        <div class="media ml-5" *ngFor="let sComment of comment.subComments">
          <a class="pull-left" href="#">
            <div class="avatar">
              <img alt="64x64" class="media-object c-img-thumnail img-circle img-no-padding img-responsive" *ngIf="sComment"
                src="{{ sComment.author.photoURL }}" /></div>
          </a>
          <div class="media-body">
            <h6 class="media-heading">{{ sComment.author.displayName }}</h6>
            <div class="pull-right">
              <h6 class="text-muted" *ngIf="comment.hasOwnProperty('updatedAt'); else createAt">{{ sComment.updatedAt | postTime }}</h6>
              <ng-template #createAt><h6 class="text-muted">{{ sComment.createdAt | postTime }}</h6></ng-template>
            </div>
            <p>
              {{ sComment.comment }}
            </p>
          </div>
          <div></div>
          <div class="function-box d-flex">
            <app-fln-like [subComment]="sComment"></app-fln-like>
            <button class="btn btn-warning" (click)="editComment(comment, sComment)">
              edit
            </button>
            <button class="btn btn-danger" (click)="deleteComment(comment, sComment)">
              delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<small *ngIf="commentList">
  <h3>COMMENT LIST</h3>
  <pre>
      {{ commentList | json }}
  </pre>
</small>

